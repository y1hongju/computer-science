# ch2.네트워크 엑세스 계층

물리계층 / 데이터링크 계층에 해당 (in OSI 7계층)

주로 LAN환경에서 데이터를 주고받는 규칙

## 이더넷

- 현대 유선LAN의 표준
- WAN의 대표적인 기술이 인터넷, LAN의 대표적인 기술은 **“이더넷”**
    - 근거리에 연결되어있는 호스트들끼리는 각 호스트가 호스트 서로를 이해하고, 연결매체의 스펙, 송수신되는 연결메세지의 스펙 등 주고받는 정보를 이해할 수 있어야함.
- 스펙(케이블)과 메세지의 형식인 프로토콜로 정의

### 이더넷 기술

- 물리 계층 : 이더넷으로 통신이 가능한 케이블 (이더넷 전용 케이블)
- 데이터 링크: 이더넷 프레임 (MAC주소, 타입, 페이로드 , FCS )

이더넷은 현재까지도 발전 중인 기술

이더넷의 국제 표준 : IEEE 802.3 (cf IEEE754) 

- 802.3은 이더넷 기술을 개발하는 워킹 그룹
- 802.3 뒤 알파벳 표기(e.g. 802.3u) 는 특정 이더넷 표준 규격 버전

표준 규격에 따라 전송 속도와 연결 매체 종류(케이블)가 다르다.

이더넷 케이블 지칭법

- 전송속도 BASE - 추가특성
- 10BASE-T, 25GBASE-LR, 5GBASE-T

케이블이 지원하는 속도가 보장되어야 하드웨어의 성능을 제대로 낼 수 있다.

< 테이블 >

추가 특성 표기 (전송 매체의 종류)  의미

C  동축케이블

T 트위스티드 페어 케이블

S 멀티 모드 광케이블

L 싱글 모드 광케이블

---

→ 여기서부터 데이터링크 계층에서의 이더넷 기술

### 이더넷 프레임

이더넷 네트워크에서 주고받는 데이터 형식

[헤더]

- 프리앰블
    - 이더넷 프레임의 시작을 알리는 비트열, for 송수신간의 동기화
    - 첫 7바이트는 1010101010, 마지막 1바이트는 10101011(SFD)
- **목적지/송신지 MAC주소**
    - 물리적 주소, 네트워크 장치(**N**etwork **I**nterface **C**ard)마다 할당된 고유한 주소
    - 일반적으로는 고유한 주소이고 변경하지 않음
    - 데이터링크 계층의 주소체계
    - 네트워크 세상의 주민등록 번호

cf>  NIC(네트워크 인터페이스)

: 연결 매체를 통해 받은 신호를 호스트에게 전달 

: LAN에 접속하기 위한 하드웨어

: 오늘날은 카드 형태에서 USB혹은 메인보드에 내장

: 목적지 MAC주소를 통해 프레임을 판단/폐기

- 이더타입/길이
    - 1536 이상일 경우 : 이더타입 (이 프레임이 무엇을 캡슐화 했는지 , e.g. 0800 →IPv4)
    - 1500 이하일 경우 : 프레임 표기

[페이로드]  전달받은 데이터

[트레일러]

- FCS : 오류 검출을 위한 CRC 값이 명시되어 있는 필드

---

## 허브와 CSMA/CD

### 허브

- 물리 계층의 장비
- 호스트를 연결할 수 있는 포트(port)
- MAC 주소를 사용하지 않는다 (MAC 주소는 데이터 링크 계층 개념)
    - 물리 계층에는 주소 개념이 없음
    - 어떠한 조작이나 판단 X 받은 정보를 호스트로 다 내보낼 뿐
- 오늘날에는 잘 사용하지 않음 → 스위치,라우터

반이중 통신과 전이중 통신

- 반이중 통신(haf-duplex)

송신 혹은 수신이 한 번에 한번만 이루어지는 통신 (e.g.무전기)

- 전이중 통신(full-duplex)

송신과 수신이 동시에 이루어지는 통신 (e.g. 전화)

→ 허브는 반이중 통신을 지원 

동시에 허브로 데이터를 전송할 경우 충돌(collision)이 발생

### CSMA/CD

반이중 이더넷의 충돌을 해결하기 위함

1. CS : Carrier Sense

캐리어(반송파) 감지: 메세지 전송 전 현재 전송 중인 메세지가 있는지 확인

1. MA : Multiple Access (다중 접근)
2. CD : Colllision Detection

전송 감지에도 불구하고 충돌이 났을 경우,

충돌 감지 : 잼 신호(jam signal)를 보낸 뒤 임의의 시간 동안 대기 후 재전송

### 허브의 특성 정리

- 전달 받은 신호를 모든 포트로 내보냄
- 연결된 모든 호스트가 충돌 도메인
- 반이중 모드로 통신

목적하는 포트로만 신호를 보내고, 전이중 모드로 통신하는 데이터링크 계층의 네트워크 장비가 요구됨 → **스위치**

---

## 스위치와 VLAN

### 스위치

허브의 한계를 극복

- 전달 받은 신호를 목적지 포트로만 내보내고
- 목적지 호스트가 연결된 곳만 충돌 도메인에 속해 있으며
- 전이중 모드로 통신하는 데이터 링크 계층의 장비

1)CSMA/CD가 필요하지 않다. (반이중 모드의 충돌을 방지하기 위한 프로토콜)

2)MAC주소를 이해할 수 있음, MAC Address Learning

**MAC 주소 학습 기능** 

- 포트에 연결된 호스트와 MAC 주소의 관계를 기억하는 스위치 기능
- MAC 주소 테이블
- 송신지 MAC 주소 기반으로 이루어짐

학습과정

1. 플러딩 : 허브와 같이 모든 포트에 프레임 전송
2. 포워딩과 필터링 : 어떤 포트로 내보낼지 내보내지 않을지 결정
3. 에이징 : 특정 시간이 지나면 MAC주소 테이블의 정보를 삭제

### VLAN

- 스위치의 기능
- 물리적 위치에 관계 없이 특정 LAN에 속할 수 있음

VLAN을 나누게되면 브로드캐스트 도메인이 달라지고 다른 네트워크의 영역이 나뉨 (같은 스위치에 물려있어도 정보를 받지 않는다.) 

통신하려면? → 네트워크 계층 이상의 장비가 필요 (e.g. 라우터)

- 포트 기반 VLAN
- MAC 주소 기반 VLAN (동적 VLAN)